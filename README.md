TJCv1
概要 📖
このプロジェクトは、PythonとFlaskフレームワークを使用して構築された、シンプルなブロックチェーンアプリケーションです。学習目的で作成されており、ブロックチェーンの基本的な仕組み（鍵生成、署名、PoW、ブロック、チェーン構造）を実践的に理解することを目的としています。
最大の特徴は、ビットコインとは異なる独自のProof of Work (PoW)モデルを採用している点です。通常のブロックチェーンではマイナー（採掘者）がトランザクションを承認して報酬を得ますが、このアプリでは送金者自身がトランザクションを承認するための計算コスト（PoW）を支払います。これにより、マイニング報酬や取引手数料が不要な、ユニークな経済モデルを実現しています。
⚠️ 注意: このアプリケーションは教育的なデモンストレーションです。実際の暗号資産のようにセキュリティは全く考慮されておらず、秘密鍵も平文で保存されます。絶対に実際の金融取引や価値のあるデータを扱わないでください。
主な特徴 ✨
独自のPoWモデル: 送金者が自身の送金トランザクションをブロックとして成立させるためにマイニング（PoW計算）を行います。
手数料ゼロ: マイニング報酬や取引手数料の概念がありません。
シンプルなアカウント管理: ユーザーアカウントは残高を持つシンプルなモデルで、UTXO（未使用トランザクション出力）は使用していません。
ECDSAによる暗号化: ecdsaライブラリを使用し、SECP256k1曲線（ビットコインと同じ）で鍵ペア生成、署名、検証を行います。
REST APIサーバー: Flaskを使用して、ブロックチェーンを操作するためのAPIを提供します。
JSONによる永続化: ブロックチェーンデータとユーザーデータは、data/ディレクトリ内にJSONファイルとして保存されます。
コンソールクライアント: サーバーAPIと対話するための、使いやすいコンソールベースの「窓口アプリ」が付属します。
技術スタック 🛠️
バックエンド: Python 3, Flask
暗号化: ecdsa
HTTP通信: requests (クライアント側)
プロジェクト構成 📂
Generated code
your_project/
│
├── api/                     # Flask APIサーバー関連
│   ├── __init__.py          # アプリケーションファクトリ
│   └── routes.py            # APIエンドポイントの定義
│
├── app/                     # アプリケーションのコアロジック
│   ├── __init__.py
│   ├── block.py             # ブロックの構造定義
│   ├── blockchain.py        # ブロックチェーン全体の管理
│   ├── user.py              # ユーザーデータの管理
│   ├── utils.py             # 共通のハッシュ計算関数など
│   └── wallet.py            # 鍵生成、署名、検証ロジック
│
├── client/                  # コンソールクライアント（窓口アプリ）
│   ├── main.py              # アプリの実行ファイル
│   ├── client_wallet.py     # API通信とクライアント側ロジック
│   └── users/               # 生成されたユーザーの鍵ペアを保存
│
├── data/                    # 永続化データ
│   ├── blockchain.json      # ブロックチェーンデータ
│   └── users.json           # 全ユーザーの残高や公開鍵
│
├── run.py                   # サーバー起動スクリプト
├── requirements.txt         # 必要なPythonライブラリ
└── README.md                # このファイル```

---

## セットアップと実行方法 🚀

### 1. 前提条件

*   Python 3.8以上

### 2. 必要なライブラリのインストール

まず、プロジェクトのルートディレクトリに`requirements.txt`を作成します。

**`requirements.txt`:**
```txt
Flask==3.0.0
ecdsa==0.18.0
requests==2.31.0
Use code with caution.
次に、ターミナルで以下のコマンドを実行してライブラリをインストールします。
Generated bash
pip install -r requirements.txt
Use code with caution.
Bash
3. サーバーの起動
新しいターミナルを開き、以下のコマンドでAPIサーバーを起動します。
Generated bash
python run.py
Use code with caution.
Bash
サーバーが http://127.0.0.1:5000 で起動します。
4. クライアント（窓口アプリ）の起動
別の新しいターミナルを開き、clientディレクトリに移動してクライアントアプリを起動します。
Generated bash
# clientディレクトリに移動
cd client

# 窓口アプリを起動
python main.py
Use code with caution.
Bash
コンソールにメニューが表示され、操作できるようになります。
クライアントアプリの使い方
クライアントアプリ（窓口）では、以下の操作が可能です。
ユーザー作成: 新しいユーザー名と初期残高を指定します。内部で鍵ペアが生成され、client/users/フォルダに保存されます。
送金: 送金元、送金先、金額を指定します。この操作を行うと、クライアント側でPoW計算（マイニング）が自動的に開始されます。計算が完了すると、トランザクションがブロックとしてサーバーに送信されます。
取引履歴を見る: 特定のユーザーに関連する全てのトランザクション履歴を表示します。
残高を確認する: 特定のユーザーの現在の残高を表示します。
ユーザー一覧を見る: 登録されている全ユーザーの情報を残高の多い順に一覧表示します。
APIエンドポイント一覧 📋
メソッド	エンドポイント	説明
POST	/api/create_user	新しいユーザーを作成し、初期残高を設定します。
POST	/api/send	送金トランザクションを含んだブロックを受け付けます。クライアント側でPoWを解いたnonceが必要です。
GET	/api/info	クライアントがPoWを計算するために必要な情報（難易度、最新ブロックハッシュ）を返します。
GET	/api/balance?username=	指定されたユーザーの残高を返します。
GET	/api/users	登録されている全ユーザーのリストを返します。
GET	/api/chain	現在のブロックチェーン全体のデータを返します。
GET	/api/transactions?username=	(オプション) 指定ユーザーのトランザクション履歴を返します。